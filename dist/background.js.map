{"version":3,"file":"background.js","mappings":";;;;;;AAAa;AACb;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;AACD;AACA;AACA;AACA;AACA,wBAAwB,mCAAmC;AAC3D,kDAAkD,sBAAsB;AACxE;AACA;AACA;AACA;AACA,0BAA0B,mBAAmB;AAC7C;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL","sources":["webpack://take-a-break/./scripts/background.ts"],"sourcesContent":["\"use strict\";\n//Create an alarm and inject content script when the alarm fires\nchrome.runtime.onInstalled.addListener(function () {\n    chrome.alarms.create(\"breakAlarm\", {\n        delayInMinutes: 1,\n        periodInMinutes: 1,\n    });\n});\n//Listen for the alarm to fire\nchrome.alarms.onAlarm.addListener(function (alarm) {\n    console.log(\"Fired\", alarm.name);\n    //   if (alarm.name === \"breakAlarm\") {\n    chrome.tabs.query({ active: true, currentWindow: true }, function (tabs) {\n        // chrome.tabs.sendMessage(tabs[0].id!, { message: \"breakTime\" });\n        //Execute content script when the alarm fires\n        if (tabs.length > 0) {\n            console.log(tabs);\n            chrome.scripting.executeScript({\n                target: { tabId: tabs[0].id },\n                files: [\"dist/content.js\"],\n            });\n        }\n    });\n    //   }\n});\nchrome.runtime.onMessage.addListener(function (message, sender, sendResponse) {\n    console.log(message);\n    if (typeof message === \"object\") {\n        Object.entries(message).forEach(function (_a) {\n            var _b;\n            var key = _a[0], value = _a[1];\n            chrome.storage.local.set((_b = {}, _b[key] = value, _b));\n        });\n        createOrUpdateAlarms();\n    }\n});\nfunction createOrUpdateAlarms() {\n    chrome.storage.local.get([\"timeout\", \"water\", \"walk\"], function (items) {\n        var timeout = items.timeout, water = items.water, walk = items.walk;\n        chrome.alarms.clearAll();\n        if (timeout) {\n            chrome.alarms.create(\"breakAlarm\", {\n                delayInMinutes: timeout,\n                periodInMinutes: timeout,\n            });\n        }\n        if (water) {\n            chrome.alarms.create(\"waterAlarm\", {\n                delayInMinutes: water,\n                periodInMinutes: water,\n            });\n        }\n        if (walk) {\n            chrome.alarms.create(\"walkAlarm\", {\n                delayInMinutes: walk,\n                periodInMinutes: walk,\n            });\n        }\n    });\n}\n"],"names":[],"sourceRoot":""}